plugins {
    id 'java'
    id 'org.jetbrains.intellij' version '1.1.6'
    id 'org.jetbrains.kotlin.jvm' version '1.5.30'
    id 'org.jetbrains.kotlin.kapt' version '1.5.30'
}

ext {
    intellijPlatform = 'IU-2018.3'
    // Build target 2020+ requires this - 2018 does not have 'java' plugin:
    //intellijPlatformPlugins = ['DatabaseTools'] // DatabaseTools is for BPMN process 'debugging'
    intellijPlatformPlugins = ['DatabaseTools']

    kotlinStdlib = '1.5.30'

    mapstruct = '1.4.2.Final'
    jackson = '2.10.1'
    dom4j = '2.0.0'

    junitJupiter = '5.6.2'
    junitPlatformRunner = '1.6.2'
    kluent = '1.68'
    mockitoInline = '3.3.3'
    mockitoKotlin = '2.2.0'
}

group = 'com.valb3r'

sourceCompatibility = 1.8

repositories {
    mavenCentral()
}

intellij {
    version = intellijPlatform
    pluginName = 'flowable-bpmn-plugin'
    updateSinceUntilBuild = false
    plugins = intellijPlatformPlugins
}

allprojects {
    apply plugin: 'jacoco'

    jacoco {
        toolVersion = '0.8.7'
    }
}

subprojects {
    tasks.withType(Test) {
        useJUnitPlatform()
    }
}